<!-- Replacing this code with a hard coded form to fix 405 issue:
<form class="static-comments" method="post" action="{{ site.static_comments.endpoint }}">
<input type="hidden" name="options[redirect]" value="{{ page.url }}#comment-submitted"> -->

<form class="static-comments" method="post" action="https://staticcomments.deno.dev/api/comment">

  <label>Your name
    <input type="text" name="fields[name]" required>
  </label>

  <label>Your comment
    <textarea name="fields[message]" required></textarea>
  </label>

  <button type="submit">Submit comment</button>
</form>

<script>
document.querySelector('.static-comments').addEventListener('submit', async (e) => {
  e.preventDefault();
  const form = e.target;
  const data = new FormData(form);
  try {
    const res = await fetch(form.action, { method: 'POST', body: data });
    if (res.ok) {
      form.reset();
      alert('Comment submitted!');
    } else {
      alert('Failed to submit comment');
    }
  } catch(err) {
    alert('Error submitting comment: ' + err);
  }
});
</script>
